"use strict";(self.webpackChunkmarket=self.webpackChunkmarket||[]).push([[324],{6940:(e,a,t)=>{t.d(a,{HY:()=>r,To:()=>c,k5:()=>l,nc:()=>o});var s=t(7154);const n="http://localhost:8080",c=async e=>{const a="Bearer "+localStorage.getItem("jwt");return(await s.A.post("".concat(n,"/payments/confirm"),e,{headers:{Authorization:a}})).data},r=async e=>{const a="Bearer "+localStorage.getItem("jwt");return(await s.A.post("".concat(n,"/payments/cancel"),e,{headers:{Authorization:a}})).data},l=async e=>{const a="Bearer "+localStorage.getItem("jwt");return(await s.A.get("".concat(n,"/payments"),{headers:{Authorization:a},params:{page:e}})).data.data},o=async e=>{const a="Bearer "+localStorage.getItem("jwt");return(await s.A.get("".concat(n,"/payments/").concat(e),{headers:{Authorization:a}})).data}},4324:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var s=t(5043),n=t(5475),c=t(6940),r=t(3216),l=t(579);const o={orderId:"",paymentKey:"",amount:0};const i=function(){const[e]=(0,n.useSearchParams)(),a=(0,r.Zp)(),[t,i]=(0,s.useState)(!0),[d,m]=(0,s.useState)({...o}),[u,h]=(0,s.useState)(null),[x,v]=(0,s.useState)("\uc54c \uc218 \uc5c6\ub294 \uc624\ub958 \ubc1c\uc0dd"),j=()=>{a("/")};return(0,s.useEffect)((()=>{(async()=>{try{const a={...d};a.orderId=e.get("orderId"),a.paymentKey=e.get("paymentKey"),a.amount=e.get("amount");const t=await(0,c.To)(a);h(t)}catch(s){var a,t;console.error("Error while confirming payment:",s),v((null===(a=s.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.msg)||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958 \ubc1c\uc0dd")}finally{i(!1)}})()}),[]),t?(0,l.jsx)("div",{children:"Loading..."}):null!==u&&void 0!==u&&u.data.orderId?(0,l.jsxs)("div",{className:"payment-success-page",children:[(0,l.jsx)("h1",{className:"success-message",children:"\uacb0\uc81c \uc131\uacf5"}),(0,l.jsxs)("div",{className:"result-info",children:[(0,l.jsxs)("div",{className:"result-box",children:[(0,l.jsx)("div",{className:"result-title",children:"\uc8fc\ubb38\uba85"}),(0,l.jsx)("div",{className:"textbox",children:null===u||void 0===u?void 0:u.data.orderName})]}),(0,l.jsxs)("div",{className:"result-box",children:[(0,l.jsx)("div",{className:"result-title",children:"\uc8fc\ubb38 \uc544\uc774\ub514"}),(0,l.jsx)("div",{className:"textbox",children:null===u||void 0===u?void 0:u.data.orderId})]}),(0,l.jsxs)("div",{className:"result-box",children:[(0,l.jsx)("div",{className:"result-title",children:"\uacb0\uc81c \uae08\uc561:"}),(0,l.jsxs)("div",{className:"textbox",children:[null===u||void 0===u?void 0:u.data.totalAmount,"\uc6d0"]})]}),(0,l.jsxs)("div",{className:"result-box",children:[(0,l.jsx)("div",{className:"result-title",children:"\uacb0\uc81c \uc544\uc774\ub514"}),(0,l.jsx)("div",{className:"textbox",children:null===u||void 0===u?void 0:u.data.paymentKey})]})]}),(0,l.jsx)("button",{className:"return-button",onClick:j,children:"\ub3cc\uc544\uac00\uae30"})]}):(0,l.jsxs)("div",{className:"payment-fail-page",children:[(0,l.jsx)("h1",{className:"fail-message",children:"\uacb0\uc81c \uc2e4\ud328"}),(0,l.jsx)("div",{className:"textbox fail-message",children:"\uc0ac\uc720: ".concat(x)}),(0,l.jsx)("button",{className:"return-button",onClick:j,children:"\ub3cc\uc544\uac00\uae30"})]})},d=()=>(0,l.jsx)("div",{className:"payment-success-container",children:(0,l.jsx)(i,{})})}}]);
//# sourceMappingURL=324.b131daa4.chunk.js.map