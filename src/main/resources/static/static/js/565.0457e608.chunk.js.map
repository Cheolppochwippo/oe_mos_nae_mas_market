{"version":3,"file":"static/js/565.0457e608.chunk.js","mappings":"uIAEO,MAAMA,EAAkB,wBAElBC,EAAeC,UAC1B,MAAMC,EAAS,UAAWC,aAAaC,QAAQ,OAO/C,aANkBC,EAAAA,EAAMC,KAAK,GAADC,OAAIR,EAAe,YAAAQ,OAAWC,GAAY,KAAK,CACzEC,QAAS,CACPC,cAAeR,MAIRS,IAAI,EAIJC,EAAYX,UACvB,MAAMC,EAAS,UAAWC,aAAaC,QAAQ,OAO/C,aANkBC,EAAAA,EAAMQ,IAAI,GAADN,OAAIR,EAAe,WAAW,CACvDU,QAAS,CACPC,cAAeR,MAIRS,IAAI,C,8FCnBjB,MAqEA,EArEsBG,KACpB,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,KAChCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAEvCG,EAAAA,EAAAA,YAAU,KCLcnB,iBACNI,EAAAA,EAAMQ,IAAI,GAADN,OAHE,wBAGiB,cACnCI,KDITU,GACCC,MAAKP,IACJC,EAAWD,GAAW,IACtBI,GAAW,EAAM,IAElBI,OAAMC,IACLC,QAAQD,MAAM,0BAA2BA,GACzCL,GAAW,EAAM,GACjB,GACD,IAgBH,OAAID,GACKQ,EAAAA,EAAAA,KAAA,OAAAC,SAAK,gBAGZD,EAAAA,EAAAA,KAAA,OAAKE,UAAU,cAAaD,SAExBZ,EAAQJ,KAAKkB,KAAI,CAACC,EAAQC,KAC1BC,EAAAA,EAAAA,MAAA,OAAiBJ,UAAU,cAAaD,SAAA,EACtCD,EAAAA,EAAAA,KAAA,OAAKE,UAAU,gBAAeD,UAC5BD,EAAAA,EAAAA,KAAA,QAAAC,SAAOG,EAAOG,gBAEhBD,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,iBAAgBD,SAAA,EAC7BK,EAAAA,EAAAA,MAAA,QAAMJ,UAAU,WAAUD,SAAA,CAAEG,EAAOI,SAAS,QAE5CR,EAAAA,EAAAA,KAAA,QAAME,UAAU,SAASO,QAASA,IA5BlBlC,WACxB,UACUD,EAAAA,EAAAA,IAAaQ,GACnB4B,MAAM,gGACV,CAAE,MAAOZ,GACyB,uFAA5BA,EAAMa,SAAS1B,KAAK2B,IACtBF,MAAM,oEAERX,QAAQD,MAAM,wBAAyBA,GACvCY,MAAM,6FAER,GAiBgDG,CAAkBT,EAAOtB,UAAUmB,SAAC,iCAE9EK,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,gBAAeD,SAAA,CAAC,8BAAQG,EAAOU,cAAcC,UAAU,EAAG,QACzET,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,gBAAeD,SAAA,CAAC,2CAAWG,EAAOY,OAAO,cAVhDX,MAaR,EExCV,EAZiBY,KAIfjB,EAAAA,EAAAA,KAAA,OAAKE,UAAU,sBAAqBD,UAElCD,EAAAA,EAAAA,KAACZ,EAAa,K","sources":["api/issuedApi.js","components/coupon/ListComponent.js","api/couponApi.js","pages/coupons/ListPage.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const API_SERVER_HOST = \"http://localhost:8080\";\r\n//쿠폰 발급\r\nexport const issuedCoupon = async (couponId) => {\r\n  const header = \"Bearer \" +localStorage.getItem('jwt');\r\n  const res = await axios.post(`${API_SERVER_HOST}/issued/${couponId}`, null,{\r\n    headers: {\r\n      Authorization: header,\r\n    },\r\n  });\r\n\r\n  return res.data;\r\n};\r\n\r\n//발급받은 쿠폰 조회\r\nexport const getIssued = async () => {\r\n  const header = \"Bearer \" +localStorage.getItem('jwt');\r\n  const res = await axios.get(`${API_SERVER_HOST}/issued`, {\r\n    headers: {\r\n      Authorization: header,\r\n    },\r\n  });\r\n\r\n  return res.data;\r\n};\r\n\r\n\r\n","import { useEffect, useState } from 'react';\r\nimport { getCoupons } from '../../api/couponApi';\r\nimport './CouponList.css';\r\nimport { issuedCoupon } from '../../api/issuedApi';\r\n\r\nconst ListComponent = () => {\r\n  const [coupons, setCoupons] = useState([]); // 쿠폰 목록을 저장할 상태\r\n  const [loading, setLoading] = useState(true); // 데이터 로딩 상태\r\n\r\n  useEffect(() => {\r\n    getCoupons()\r\n    .then(coupons => {\r\n      setCoupons(coupons || []); // API 응답이 없으면 빈 배열로 초기화\r\n      setLoading(false); // 데이터 로딩 완료 후 로딩 상태 변경\r\n    })\r\n    .catch(error => {\r\n      console.error('Error fetching coupons:', error);\r\n      setLoading(false); // 데이터 로딩 실패 시 로딩 상태 변경\r\n    });\r\n  }, []);\r\n\r\n  const handleIssueCoupon = async (couponId) => {\r\n    try {\r\n        await issuedCoupon(couponId);\r\n        alert('쿠폰이 성공적으로 발급되었습니다.');\r\n    } catch (error) {\r\n      if (error.response.data.msg === '이미 쿠폰을 발급 받으셨습니다.') {\r\n        alert('이미 발급된 쿠폰입니다.');\r\n      }else{\r\n      console.error('Error issuing coupon:', error);\r\n      alert('쿠폰 발급 중 오류가 발생했습니다.');\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>; // 로딩 중일 때 표시할 내용\r\n  }\r\n  return (\r\n    <div className=\"coupon-list\">\r\n\r\n      { coupons.data.map((coupon, index) => (\r\n        <div key={index} className=\"coupon-item\">\r\n          <div className=\"coupon-header\">\r\n            <span>{coupon.couponInfo}</span>\r\n          </div>\r\n          <div className=\"coupon-content\">\r\n            <span className=\"discount\">{coupon.discount}%</span>\r\n            {/* <span className=\"action\">적용하기</span> */}\r\n            <span className=\"action\" onClick={() => handleIssueCoupon(coupon.couponId)}>쿠폰받기</span>\r\n          </div>\r\n          <div className=\"coupon-period\">사용 기한: {coupon.effectiveDate.substring(0, 10)}</div>\r\n          <div className=\"coupon-period\">남은 쿠폰 개수: {coupon.amount}개</div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n  // return (\r\n  //     <div>\r\n  //       <h1>Coupons</h1>\r\n  //       <ul>\r\n  //         {coupons.data.map((coupon, index) => (\r\n  //             <li key={index}>\r\n  //               <p>Coupon Info: {coupon.couponInfo || \"No Information\"}</p>\r\n  //               <p>Discount: {coupon.discount}</p>\r\n  //               <p>Amount: {coupon.amount}</p>\r\n  //             </li>\r\n  //         ))}\r\n  //       </ul>\r\n  //     </div>\r\n  // );\r\n// };\r\n\r\nexport default ListComponent;\r\n","import axios from \"axios\";\r\n\r\nexport const API_SERVER_HOST = \"http://localhost:8080\";\r\n\r\nexport const getCoupons = async () => {\r\n  const res = await axios.get(`${API_SERVER_HOST}/coupons`);\r\n  return res.data;\r\n};\r\n\r\n\r\n","import ListComponent from \"../../components/coupon/ListComponent\";\r\n\r\n\r\nconst ListPage = () => {\r\n\r\n\r\n  return (\r\n  <div className=\"p-4 w-full bg-white\">\r\n    \r\n    <ListComponent/>\r\n\r\n  </div>\r\n   );\r\n}\r\n\r\nexport default ListPage;\r\n"],"names":["API_SERVER_HOST","issuedCoupon","async","header","localStorage","getItem","axios","post","concat","couponId","headers","Authorization","data","getIssued","get","ListComponent","coupons","setCoupons","useState","loading","setLoading","useEffect","getCoupons","then","catch","error","console","_jsx","children","className","map","coupon","index","_jsxs","couponInfo","discount","onClick","alert","response","msg","handleIssueCoupon","effectiveDate","substring","amount","ListPage"],"sourceRoot":""}